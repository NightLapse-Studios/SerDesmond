"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[896],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>d});var n=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var c=n.createContext({}),l=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},u=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},m="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,i=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),m=l(r),h=o,d=m["".concat(c,".").concat(h)]||m[h]||p[h]||i;return r?n.createElement(d,a(a({ref:t},u),{},{components:r})):n.createElement(d,a({ref:t},u))}));function d(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=r.length,a=new Array(i);a[0]=h;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[m]="string"==typeof e?e:o,a[1]=s;for(var l=2;l<i;l++)a[l]=r[l];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}h.displayName="MDXCreateElement"},6229:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var n=r(87462),o=(r(67294),r(3905));const i={sidebar_position:3},a="Performance",s={unversionedId:"Performance",id:"Performance",title:"Performance",description:"In the repository, a rudimentary benchmark script can be toggled with Config.RunBench. Individual benchmarks can be toggled from within the Bench script. The first time you run benchmarks after starting studio will tend to produce slower results than future runs even though each benchmark is run multiple times.",source:"@site/docs/Performance.md",sourceDirName:".",slug:"/Performance",permalink:"/SerDesmond/docs/Performance",draft:!1,editUrl:"https://github.com/NightLapse-Studios/SerDesmond/edit/master/docs/Performance.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"defaultSidebar",previous:{title:"Usage",permalink:"/SerDesmond/docs/Syntax"},next:{title:"Development",permalink:"/SerDesmond/docs/ProjectStructure"}},c={},l=[{value:"Compilation",id:"compilation",level:2},{value:"SerDes",id:"serdes",level:2}],u={toc:l},m="wrapper";function p(e){let{components:t,...r}=e;return(0,o.kt)(m,(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"performance"},"Performance"),(0,o.kt)("p",null,"In the repository, a rudimentary benchmark script can be toggled with ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/NightLapse-Studios/SerDesmond/blob/main/src/ReplicatedFirst/Config.luau#L90"},"Config.RunBench"),". Individual benchmarks can be toggled from within the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/NightLapse-Studios/SerDesmond/blob/main/src/ReplicatedFirst/Modules/Bench.luau"},"Bench")," script. The first time you run benchmarks after starting studio will tend to produce slower results than future runs even though each benchmark is run multiple times."),(0,o.kt)("p",null,"The below figures are from a machine using a desktop Ryzen 5 1600x (one of the earliest ryzen processors) with modules in native mode. We use Squash as a reference since it is the most equivalent project."),(0,o.kt)("h2",{id:"compilation"},"Compilation"),(0,o.kt)("p",null,"Obviously SerDesmond is much slower to construct than Squash due to having a compilation from string stage. It will never be as fast as other libraries in this regard, it will always be orders of magnitude slower (currently ~1.5 to 2.5 orders of magnitude slower). However, it can compile about 1.2-2.1mB/s depending on the structure. Larger structures tend to have higher throughput. I can compile a simple map 41k times per second with 1.2 mB/s throughput while the ManyFieldsCompTest compiles 14k times per second with a throughput of ~2.1 mB/s on my machine. Whitespace can inflate perceived throughput values since they do not entail any work in the compilation stage."),(0,o.kt)("p",null,"It seems that it's already the case that only truly massive structures need to worry about compilation time, which should generally be done only once on application startup to begin with."),(0,o.kt)("h2",{id:"serdes"},"SerDes"),(0,o.kt)("p",null,"SerDes performance is about the same as any other buffer SerDes library since we still compile down to the same constructs as them. We don't do buffer reallocations though, so in principle we will tend to be faster. Faster SerDes is a goal of this project."),(0,o.kt)("p",null,"Due to lack of time in the oven, desmond may be slower in some scenarios or may be missing byte-saving strategies. E.G. writing an 18 element array is marginally faster than Squash, meanwhile writing to a struct with 3 fields is marginally slower. Large structures should expect overall better performance due to lack of buffer reallocations."))}p.isMDXComponent=!0}}]);